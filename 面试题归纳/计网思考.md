# 计网思考

## SSL协议属于哪一层
SSL是https协议中的一个用来负责加密，保证传输安全的协议，具体分为SSL记录协议和SSL握手协议
> SSL记录协议（SSL Record Protocol）：它建立在可靠的传输协议（如TCP）之上，为高层协议提供数据封装、压缩、加密等基本功能的支持
> SSL握手协议（SSL Handshake Protocol）：它建立在SSL记录协议之上，用于在实际的数据传输开始前，通讯双方进行身份认证、协商加密算法、交换加密密钥等

在《自顶向下方法》中谈及SSL协议时，因为使用五层模型，所以只是粗略提到了一下SSL是介于传输层和应用层之间的协议。后来看《密码学原理》时又碰到了SSL协议，再次结合OSI七层模型，应用层和传输层之间有会话层、表示层
> 会话层：该层对传输的报文提供同步管理服务。在两个不同系统的互相通信的应用进程之间建立、组织和协调交互
> 表示层：该层的主要任务是把所传送的数据的抽象语法变换为传送语法，即把不同计算机内部的不同表示形式转换成网络通信中的标准表示形式。此外，对传送的数据加密（或解密）、正文压缩（或还原）也是表示层的任务

从字面意思看，SSL协议在会话层、表示层都起了作用，也没有什么文章说明确在哪一层，我感觉能够自圆其说就好了

## TCP四次挥手最后一次挥手时客户端进入Time_Wait阶段的原因
TIME_WAIT时间长度是2MSL（2×最大报文段存活时间），有以下两点考虑：

第一，保证客户端发送的最后一个ACK报文能够到达服务器，因为这个ACK报文可能丢失，站在服务器的角度看来，我已经发送了FIN+ACK报文请求断开了，客户端还没有给我回应，应该是我发送的请求断开报文它没有收到，于是服务器又会重新发送一次，而客户端就能在这个2MSL时间段内收到这个重传的报文，接着给出回应报文，并且会重启2MSL计时器。

第二，防止类似与“三次握手”中提到了的“已经失效的连接请求报文段”出现在本连接中。客户端发送完最后一个确认报文后，在这个2MSL时间中，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样新的连接中不会出现旧连接的请求报文
> 参考：https://blog.csdn.net/qzcsu/article/details/72861891
